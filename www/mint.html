<link rel="stylesheet" href="style.css">
<div id="address"></div>
<div id="content">
    <div id="mintCount"></div>
    <div id="availible"></div>
    <div id="price"></div>
    <div id="mintMax"></div>
    <div id="minted"></div>
    <div id="userMinted"></div>

    <input placeholder="Amount to mint" value="1" id="amount">
    
    <div class="button" onclick="contract.mint()">
        <span>Mint</span>
    </div>
    <div class="button">
        <a href="index.html">
            <span>
                Home
            </span>
        </a>
    </div>
</div>
<div id="footer">Copyright 2022 PlaySK8</div>
<script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
<script src="./scripts/contract.js"></script>

<script>
    let lux = {
        count: document.getElementById("mintCount"),
        availible: document.getElementById("availible"),
        price: document.getElementById("price"), 
        mintMax: document.getElementById("mintMax"),
        amount: document.getElementById("amount"),
        minted: document.getElementById("minted"),
        userMinted: document.getElementById("userMinted"),
        address: document.getElementById("address"),
        async setup(){
            try{
                await contract.connect()
                
                lux.address.innerHTML=await contract.signer.getAddress()

                let minted= await contract.tokenContract.salePointer()
                let userMinted= await contract.tokenContract.mintCount(await contract.signer.getAddress())
                let mintMax=5

                lux.count.innerHTML='Total availible: 10,000';
                lux.price.innerHTML='Price: 0.1 ETH';
                lux.mintMax.innerHTML=`Mint Max: ${mintMax}`;
                lux.minted.innerHTML=`Total Minted: ${minted-1}`;
                lux.userMinted.innerHTML=`You've Minted: ${userMinted}`;
            }catch(e){
                console.trace(e)
                alert("Could not load latest mint info. Please make sure you are on the correct network.")
            }
        }
    }
    lux.setup();
</script>
